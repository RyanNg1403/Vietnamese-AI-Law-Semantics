<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Legal Text Semantic Annotation System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;600&family=Work+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <header>
    <div class="top-bar">
      <div class="mark">AI</div>
      <div class="titles">
        <h1>AI-Law-Semantics</h1>
        <div class="subtitle">BERT-based word sense disambiguation - CS229 project</div>
      </div>
    </div>
  </header>

  <main>
    <section>
      <div class="section-heading">
        <div>
          <p class="eyebrow">Input</p>
          <h2>Submit legal text</h2>
        </div>
        <div class="hint">Endpoint: <code id="endpointLabel"></code></div>
      </div>
      <form id="annotateForm">
        <label for="textInput">Legal text</label>
        <textarea id="textInput" placeholder="Paste a paragraph from your legal document. The backend should return token-level senses and quality metrics."></textarea>
        <div class="actions">
          <button type="submit" id="submitBtn">Run annotation</button>
          <button type="button" class="secondary" id="sampleBtn">Use sample text</button>
        </div>
      </form>
      <div class="callout">
        Expects POST <code>/annotate</code> with JSON <code>{ text: "..." }</code>. Response should provide <code>metrics</code> (accuracy, f1_macro, f1_weighted) and token-level annotations.
      </div>
    </section>

    <section>
      <div class="section-heading">
        <div>
          <p class="eyebrow">Results</p>
          <h2>Model output</h2>
        </div>
        <div id="status" class="status">Awaiting input.</div>
      </div>

      <div class="metrics-grid">
        <div class="metric-card">
          <div class="label">Accuracy</div>
          <div class="value" id="accuracy">--</div>
        </div>
        <div class="metric-card">
          <div class="label">F1 (Macro)</div>
          <div class="value" id="f1macro">--</div>
        </div>
        <div class="metric-card">
          <div class="label">F1 (Weighted)</div>
          <div class="value" id="f1weighted">--</div>
        </div>
      </div>

      <div class="table-wrap" id="tableWrap">
        <table>
          <thead>
            <tr>
              <th style="width: 18%;">Token</th>
              <th style="width: 22%;">Predicted sense</th>
              <th>Definition / gloss</th>
              <th style="width: 14%;">Confidence</th>
            </tr>
          </thead>
          <tbody id="tableBody">
            <tr><td colspan="4">No annotations yet.</td></tr>
          </tbody>
        </table>
      </div>
    </section>

  <script src="./app.js"></script>
</body>
</html>
